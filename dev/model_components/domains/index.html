<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Domains · Pumas</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Pumas</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Tutorials</span><ul><li><a class="toctext" href="../../tutorials/introduction/">Introduction to Pumas</a></li></ul></li><li><span class="toctext">Basics</span><ul><li><a class="toctext" href="../../basics/overview/">Overview of Pumas</a></li><li><a class="toctext" href="../../basics/models/">Defining NLME Models</a></li><li><a class="toctext" href="../../basics/doses_subjects_populations/">Dosage Regimens, Subjects, and Populations</a></li><li><a class="toctext" href="../../basics/simulation/">Simulation of Pumas Models</a></li><li><a class="toctext" href="../../basics/estimation/">Estimating Parameters of Pumas Models</a></li><li><a class="toctext" href="../../basics/nca/">Noncompartmental Analysis (NCA)</a></li><li><a class="toctext" href="../../basics/faq/">Frequently Asked Questions (FAQ)</a></li></ul></li><li><span class="toctext">Model Components</span><ul><li class="current"><a class="toctext" href>Domains</a><ul class="internal"><li><a class="toctext" href="#Matching-Parameter-Types-and-Domains-1">Matching Parameter Types and Domains</a></li><li><a class="toctext" href="#RealDomain-and-VectorDomain-1">RealDomain and VectorDomain</a></li><li><a class="toctext" href="#ConstDomain-1">ConstDomain</a></li><li><a class="toctext" href="#Positive-Definite-Matrix-Domains-1">Positive-Definite Matrix Domains</a></li><li><a class="toctext" href="#Distributional-Domains-1">Distributional Domains</a></li><li><a class="toctext" href="#Constrained-1">Constrained</a></li></ul></li><li><a class="toctext" href="../dosing_control/">Dosing Control Parameters (DCP)</a></li><li><a class="toctext" href="../dynamical_types/">Dynamical Problem Types</a></li></ul></li><li><span class="toctext">Diagnostics</span><ul><li><a class="toctext" href="../../analysis/diagnostics/">Simulation and Estimation Diagnostics</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Model Components</li><li><a href>Domains</a></li></ul><a class="edit-page" href="https://github.com/PumasAI/PumasDocs.jl/blob/master/docs/src/model_components/domains.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Domains</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Domains-1" href="#Domains-1">Domains</a></h1><p>Domains are used to define the <code>param</code> portion of a <code>PumasModel</code>. This segment of the documentation describes the available <code>Domain</code> types that can be used within the <code>param</code> portions.</p><h2><a class="nav-anchor" id="Matching-Parameter-Types-and-Domains-1" href="#Matching-Parameter-Types-and-Domains-1">Matching Parameter Types and Domains</a></h2><p>A <code>param</code> specification in a <code>PumasModel</code> directly defines the types which are required to be given as the input to the model&#39;s API functions such as <code>simobs</code> and <code>fit</code>. For example, if the <code>param</code> specification is given as:</p><pre><code class="language-julia">@param begin
    θ ∈ VectorDomain(2, lower=[0.0,0.0], upper=[20.0,20.0])
    Ω ∈ PSDDomain(2)
    Σ ∈ ConstDomain(0.1)
end</code></pre><p>Then in <code>simobs(model, data, param)</code> or <code>fit(model, data, param)</code>, the parameters <code>param</code> must be a <code>NamedTuple</code> of values where the type fits in the domain. For example, <code>param</code> must have <code>param.θ</code> as a <code>Vector</code>. Thus the following would be a valid definition of <code>param</code> for this structure:</p><pre><code class="language-julia">param = (
    θ = [0.4, 7.0],
    Ω = [0.04 0.0
         0.0  0.01],
    Σ = 0.1
    )</code></pre><p>Below are the specifications of the <code>Domain</code> types and their matching value types.</p><h2><a class="nav-anchor" id="RealDomain-and-VectorDomain-1" href="#RealDomain-and-VectorDomain-1">RealDomain and VectorDomain</a></h2><p><code>RealDomain</code> and <code>VectorDomain</code> are the core domain types of Pumas. A <code>RealDomain</code> defines a scalar value which exists in the real line, while a <code>VectorDomain</code> defines a real-valued vector which lives in a hypercube of <span>$\mathbb{R}^n$</span>. The length <code>n</code> of a <code>VectorDomain</code> is a required positional argument. Each of these allow keyword arguments for setting an <code>upper</code> and <code>lower</code> bound for the segment, where for the <code>RealDomain</code> these are scalars and for the <code>VectorDomain</code> it is a vector of upper and lower bound for each component of the vector. Thus the constructors are:</p><pre><code class="language-julia">RealDomain(; upper, lower)
VectorDomain(n; upper, lower)</code></pre><p>A <code>RealDomain</code> requires that the matching parameters are an <code>AbstractFloat</code> type. A <code>VectorDomain</code> requires that the matching parameters are a <code>Vector</code> of an <code>AbstactFloat</code> type which has the correct size.</p><h2><a class="nav-anchor" id="ConstDomain-1" href="#ConstDomain-1">ConstDomain</a></h2><p><code>ConstDomain</code> is a special domain type which holds the parameter constant during estimation routines. A <code>ConstDomain</code> is defined by its value:</p><pre><code class="language-julia">ConstDomain(val)</code></pre><p>A <code>ConstDomain</code> requires the matching value in the parameters.</p><h2><a class="nav-anchor" id="Positive-Definite-Matrix-Domains-1" href="#Positive-Definite-Matrix-Domains-1">Positive-Definite Matrix Domains</a></h2><p>In many cases, one may wish to specify a positive-definite covariance matrix as a parameter in a model. A common use case for this functionality is for defining the domain of a random effect. There are two domains for positive-definite matrices: <code>PSDDomain</code> and <code>PDiagDomain</code>. Both of the constructors require the size <code>n</code> of the <code>n x n</code> postive-definite matrix:</p><pre><code class="language-julia">PSDDomain(n)
PDiagDomain(n)</code></pre><p>A <code>PSDDomain</code> requires that the matching matrix input is positive definite but puts no further restrictions on the matrix. If a domain is specified as <code>Ω ∈ PSDDomain(2)</code>, then</p><pre><code class="language-julia">Ω = [0.04 0.0
     0.0  0.01]</code></pre><p>is a valid parameter specification. The <code>PDiagDomain</code> restricts the parameter space to positive definite diagonal matricesis, i.e. diagonal matrices with positive diagonal elemenets. Thus, if a domain is specified as <code>Ω ∈ PDiagDomain(2)</code>, then</p><pre><code class="language-julia">Ω = Diagonal([0.0, 1.0])</code></pre><p>is a valid parameter specification.</p><h2><a class="nav-anchor" id="Distributional-Domains-1" href="#Distributional-Domains-1">Distributional Domains</a></h2><p>Instead of using a <code>Domain</code> type from Pumas, a <code>Distribution</code> can be used to specify a domain. For example,</p><pre><code class="language-julia">Ω ~ Normal(0,1)</code></pre><p>is a valid domain specification. If this is done, then the probability distribution is used and interpreted as the prior distribution. Implicitly, the domain of a distribution is treated as the support of the distribution. A distributional domain requires that the matching parameter is of the same type as a sample from the domain. For example, if <code>Ω ~ Normal(0,1)</code>, then <code>Ω</code> should be given as a scalar.</p><h2><a class="nav-anchor" id="Constrained-1" href="#Constrained-1">Constrained</a></h2><p>The <code>Constrained</code> domain is for defining a <code>Constrained</code> probability distribution. <code>Constrained</code> takes in a distribution and has keyword arguments for <code>upper</code> and <code>lower</code> bounds. For example, <code>ψ ~ Constrained(MVNormal(Ω),lower=[0.0,0.0])</code> defines a <code>ψ</code> to be from the distributional domain which corresponds to a multivariate normal distribution, but is constrained to be positive. Like with the distributional domains, <code>Constrained</code> requires that the matching parameter is of the same type as a sample from the domain.</p><footer><hr/><a class="previous" href="../../basics/faq/"><span class="direction">Previous</span><span class="title">Frequently Asked Questions (FAQ)</span></a><a class="next" href="../dosing_control/"><span class="direction">Next</span><span class="title">Dosing Control Parameters (DCP)</span></a></footer></article></body></html>
